<div class="container-dashboard">
  <app-registrar-sidebar></app-registrar-sidebar>
  <div class="main-content">
    <div class="fixed-background"></div>
    <app-registrar-navbar></app-registrar-navbar>
    <div class="container-fluid vh-100 enrolled">
      <!-- <div class="divider mb-4"></div> -->
      <div class="bg-white w-100 rounded">
        <div class="text-start text-header rounded-top shadow w-100 py-2 ps-3">
          <h3 class="text-white fw-bold h5 m-0">Enrolled Students</h3>
        </div>
        <div class="container py-3">
          <div class="row">
            <div class="col-6 text-start">
              <label for="search" class="mx-1 mb-3"> Search: </label>
              <input
                type="search"
                aria-label="search"
                [(ngModel)]="filterObj.name"
                (input)="onSearchInputChange()"
                id="search"
              />
            </div>
            <div class="col-6 text-end">{{ this.total }} Total of Students</div>
          </div>
          <div class="table-responsive">
            <table
              id="example"
              class="table table-striped table-sm align-middle"
              style="width: 100%"
            >
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Course</th>
                  <th>Year/Level</th>
                  <th>Department</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <!-- Use ngIf to check if there are students -->
                <ng-container
                  *ngIf="students && students.length > 0; else noRecords"
                >
                  <!-- Iterate over students and display table rows -->
                  <tr *ngFor="let student of students">
                    <td>{{ student.id }}</td>
                    <td class="text-uppercase">
                      {{ student.lastname }}, {{ student.firstname }}
                      {{ student.middlename }}
                    </td>
                    <td>{{ student.course }}</td>
                    <td>{{ student.year_level }}</td>
                    <td>{{ student.department_name }}</td>
                    <td colspan="2">
                      <button
                        [id]="student.id"
                        class="btn btn-secondary btn-sm text-center information"
                        data-bs-toggle="modal"
                        data-bs-target="#studView"
                        (click)="studentInfo(student.id)"
                      >
                        <i class="fa-solid fa-eye"></i>View
                      </button>
                    </td>
                  </tr>
                </ng-container>
                <!-- If no records are found, display a message -->
                <ng-template #noRecords>
                  <tr>
                    <td colspan="6" class="text-center">No Records Found</td>
                  </tr>
                </ng-template>
              </tbody>
            </table>
            <div class="row table-under">
              <div class="d-flex justify-content-center">
                <div class="">
                  <nav aria-label="Page navigation example ">
                    <ul class="pagination">
                      <li
                        class="page-item"
                        (click)="onPrevious()"
                        [class.disabled]="filterObj.page === 1"
                      >
                        <a class="page-link" tabindex="-1" aria-disabled="true">
                          Previous
                        </a>
                      </li>
                      <li
                        class="page-item"
                        *ngFor="let pageNum of generatePageNumbers()"
                      >
                        <p
                          class="page-link"
                          (click)="goToPage(pageNum)"
                          [class.active]="pageNum === filterObj.page"
                        >
                          {{ pageNum }}
                        </p>
                      </li>

                      <li
                        class="page-item"
                        (click)="onNext()"
                        [class.disabled]="filterObj.page === totalPage"
                      >
                        <a class="page-link"> Next </a>
                      </li>
                    </ul>
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <p class="opacity-0 my-3">space</p>
    </div>
  </div>
</div>

<!-- Student Info -->

<div
  class="modal fade"
  id="studView"
  tabindex="-1"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
  role="dialog"
  aria-labelledby="modalTitleId"
  aria-hidden="true"
>
  <div
    class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-xl"
    role="document"
  >
    <div class="modal-content" *ngFor="let student of info">
      <div class="modal-header">
        <h3 class="h5 m-0 p-0 text-capitalize fw-bold">
          {{ student.lastname }}, {{ student.firstname }}
          {{ student.middlename }}
        </h3>
        <small class="mx-3">New</small>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body container-fluid">
        <div class="px-5">
          <div class="row mb-3">
            <div class="col-6">
              <input
                type="text"
                [value]="student.program"
                id="course"
                class="form-control"
                aria-readonly="true"
                readonly
              />
              <small>Program</small>
            </div>
            <div class="col-3">
              <input
                type="text"
                [value]="student.id"
                id="id"
                class="form-control"
                aria-readonly="true"
                readonly
              />
              <small>Id No.</small>
            </div>
            <div class="col-3">
              <input
                type="text"
                *ngIf="student.year_level === 1"
                value="1st Yr."
                id="year"
                class="form-control"
                aria-readonly="true"
                readonly
              />
              <input
                type="text"
                *ngIf="student.year_level === 2"
                value="2nd Yr."
                id="year"
                class="form-control"
                aria-readonly="true"
                readonly
              />
              <input
                type="text"
                *ngIf="student.year_level === 3"
                value="3rd Yr."
                id="year"
                class="form-control"
                aria-readonly="true"
                readonly
              />
              <input
                type="text"
                *ngIf="student.year_level === 4"
                value="4th Yr."
                id="year"
                class="form-control"
                aria-readonly="true"
                readonly
              />
              <small>Year Level</small>
            </div>
          </div>
          <!-- <div class="row mb-3">
            <div class="col-3">
              <input
                type="text"
                [value]="student.firstname"
                id="fname"
                class="form-control text-capitalize"
                aria-readonly="true"
                readonly
              />
              <small>First Name</small>
            </div>
            <div class="col-3">
              <input
                type="text"
                [value]="student.middlename"
                id="mName"
                class="form-control text-capitalize"
                aria-readonly="true"
                readonly
              />
              <small>Middle Name</small>
            </div>
            <div class="col-3">
              <input
                type="text"
                [value]="student.lastname"
                id="lname"
                class="form-control text-capitalize"
                aria-readonly="true"
                readonly
              />
              <small>Last Name</small>
            </div>
            <div class="col-3">
              <input
                type="text"
                [value]="student.suffix"
                id="suffix"
                class="form-control text-capitalize"
                aria-readonly="true"
                readonly
              />
              <small>Suffix</small>
            </div>
          </div> -->
          <div class="row mb-3">
            <div class="col-2">
              <input
                type="text"
                [value]="student.gender"
                id="gender"
                class="form-control text-capitalize"
                aria-readonly="true"
                readonly
              />
              <small>Gender</small>
            </div>
            <div class="col-2">
              <input
                type="text"
                [value]="student.civil_status"
                id="civil_status"
                class="form-control text-capitalize text-truncate"
                aria-readonly="true"
                readonly
              />
              <small>Civil Status</small>
            </div>
            <div class="col-2">
              <input
                type="date"
                id="bdate"
                [value]="student.birthdate"
                class="form-control"
                aria-readonly="true"
                readonly
              />
              <small>Birthdate <span>(dd/mm/yyyy)</span></small>
            </div>
            <div class="col-6">
              <input
                type="text"
                id="birth_place"
                [value]="student.birth_place"
                class="form-control"
                aria-readonly="true"
                readonly
              />
              <small>BirthPlace</small>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-2">
              <input
                type="text"
                [value]="student.religion"
                id="religion"
                class="form-control text-capitalize"
                aria-readonly="true"
                readonly
              />
              <small>Religion</small>
            </div>
            <div class="col-2">
              <input
                type="text"
                [value]="student.citizenship"
                id="citizenship"
                class="form-control text-capitalize"
                aria-readonly="true"
                readonly
              />
              <small>Citizenship</small>
            </div>
            <div class="col-2">
              <input
                type="text"
                [value]="student.contact_number"
                id="number"
                class="form-control text-capitalize"
                aria-readonly="true"
                readonly
              />
              <small>Contact Number</small>
            </div>
            <div class="col-6">
              <input
                type="text"
                [value]="student.email_address"
                id="email"
                class="form-control"
                aria-readonly="true"
                readonly
              />
              <small>Email</small>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-6">
              <textarea name="" id="home" cols="58" rows="2" readonly>{{
                student.home_address
              }}</textarea>
              <br />
              <small>Home Address</small>
            </div>
            <div class="col-6">
              <textarea name="" id="permanent" cols="58" rows="2" readonly>{{
                student.permanent_address
              }}</textarea>
              <small>Permanent Address</small>
            </div>
          </div>

          <h3 class="h5 mt-3">Educational Record</h3>
          <hr />

          <div class="row gap-4 mb-3 d-flex justify-content-center">
            <div class="card col-3 p-4">
              <div>
                <h2 class="h6 fw-bold">Elementary</h2>
                <input
                  type="text"
                  id="elem_name"
                  value=""
                  class="form-control text-capitalize"
                  aria-readonly="true"
                  readonly
                />
                <small>School Name</small>
              </div>
              <div>
                <input
                  type="text"
                  id="elem_year"
                  value=""
                  class="form-control text-capitalize"
                  aria-readonly="true"
                  readonly
                />
                <small>Year Graduated</small>
              </div>
            </div>
            <div class="card col-3 p-4">
              <div>
                <h2 class="h6 fw-bold">Junior High School</h2>
                <input
                  type="text"
                  id="jsh_name"
                  value=""
                  class="form-control text-capitalize"
                  aria-readonly="true"
                  readonly
                />
                <small>School Name</small>
              </div>
              <div>
                <input
                  type="text"
                  id="jhs_year"
                  value=""
                  class="form-control text-capitalize"
                  aria-readonly="true"
                  readonly
                />
                <small>Year Graduated</small>
              </div>
            </div>
            <div class="card col-3 p-4">
              <div>
                <h2 class="h6 fw-bold">Senior High School</h2>
                <input
                  type="text"
                  id="shs_name"
                  value=""
                  class="form-control text-capitalize"
                  aria-readonly="true"
                  readonly
                />
                <small>School Name</small>
              </div>
              <div>
                <input
                  type="text"
                  id="shs_year"
                  value=""
                  class="form-control text-capitalize"
                  aria-readonly="true"
                  readonly
                />
                <small>Year Graduated</small>
              </div>
            </div>
          </div>

          <h3 class="h5 mt-3">Parent/Guardian's Information</h3>
          <hr />
          <div class="row mb-3">
            <div class="col-4">
              <input
                type="text"
                [value]="student.parentsOrguradian"
                id="p_mName"
                class="form-control text-capitalize"
                aria-readonly="true"
                readonly
              />
              <small>Parent/Guardian's Name</small>
            </div>
            <div class="col-4">
              <input
                type="text"
                [value]="student.parentsOccupation"
                id="occupation"
                class="form-control text-capitalize"
                aria-readonly="true"
                readonly
              />
              <small>Occupation</small>
            </div>
            <div class="col-4">
              <input
                type="text"
                [value]="student.parentcontactnumber"
                id="c_number"
                class="form-control text-capitalize"
                aria-readonly="true"
                readonly
              />
              <small>Contact Number</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
