<app-headnavagation></app-headnavagation>
<div class="fixed-login"></div>
<div *ngIf="loading" class="loading-overlay">
  <app-loading-page></app-loading-page>
</div>
<div
  class="banner d-flex justify-content-center align-items-center flex-column"
>
  <h1 class="text-center text-white fw-bolder mt-5 text-uppercase">
    New Student
  </h1>
  <p [textContent]="activateyr" class="text-center m-0 pt-2 text-white"></p>
</div>
<div class="container-fluid">
  <div
    class="formContain bg-white rounded-2 shadow-lg mx-auto container-fluid my-5 p-3 login-bg"
  >
    <div class="asclogo mx-auto"></div>
    <h2 class="formTitle text-center pb-4">CREATE AN ACCOUNT</h2>
    <div class="formBody border border-5 pt-3 rounded-5">
      <div *ngIf="!otp">
        <form [formGroup]="signUpForm" (ngSubmit)="signUp()" novalidate>
          <div class="row pt-4 pb-3 px-3">
            <div class="col-3">
              <div class="mb-3">
                <label for="firstname" class="form-label"> First Name </label>
                <input
                  type="text"
                  pInputText
                  pAutoFocus
                  [autofocus]="true"
                  class="py-2 border"
                  autocomplete="off"
                  formControlName="firstname"
                  id="firstname"
                />
              </div>
            </div>
            <div class="col-3">
              <div>
                <div class="mb-3">
                  <label for="lastname" class="form-label"> Last Name </label>
                  <input
                    type="text"
                    pInputText
                    class="py-2 border"
                    autocomplete="off"
                    formControlName="lastname"
                    id="lastname"
                  />
                </div>
              </div>
            </div>
            <div class="col-3">
              <div class="mb-1">
                <label for="middlename" class="form-label">
                  Middle Name
                  <small class="fw-normal">(check if none)</small>
                </label>
                <div class="row">
                  <div class="col-1">
                    <!-- <input
                      [checked]="noMiddleName"
                      (click)="toggleMiddleName()"
                      type="checkbox"
                      class="form-check"
                    /> -->
                    <p-checkbox
                      [ariaChecked]="noMiddleName"
                      (click)="toggleMiddleName()"
                      [binary]="true"
                      inputId="binary"
                    ></p-checkbox>
                  </div>
                  <div class="col-10">
                    <input
                      pInputText
                      [readonly]="noMiddleName"
                      formControlName="middleName"
                      type="text"
                      class="py-2 border"
                      id="middlename"
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="col-3">
              <div>
                <div class="mb-3">
                  <label for="suffix" class="form-label"> Extension: </label>
                  <input
                    pInputText
                    type="text"
                    class="py-2 border"
                    autocomplete="off"
                    formControlName="suffix"
                    id="suffix"
                  />
                </div>
              </div>
            </div>
          </div>
          <div class="row px-3">
            <div class="col-3">
              <div class="mb-3">
                <label for="gender" class="form-label"> Gender </label>
                <p-dropdown
                  formControlName="gender"
                  [options]="gender"
                  optionLabel="name"
                  optionValue="value"
                  placeholder="Select a Gender"
                  [editable]="true"
                  [showClear]="true"
                ></p-dropdown>
                <!-- <select
                  name="gender"
                  id="gender"
                  formControlName="gender"
                  class="form-select shadow-xl"
                >
                  <option [selected]="true" hidden>Please Select Gender</option>
                  <option value="male">Male</option>
                  <option value="female">Female</option>
                </select> -->
              </div>
            </div>
            <div class="col-3">
              <div class="mb-3">
                <label for="civil_status" class="form-label">
                  Civil Status
                </label>
                <p-dropdown
                  formControlName="civil_status"
                  [options]="civilstatus"
                  optionLabel="name"
                  optionValue="value"
                  placeholder="Select Civil Status"
                  [editable]="true"
                  [showClear]="true"
                ></p-dropdown>
                <!-- <select
                  name="civil_status"
                  id="civil_status"
                  formControlName="civil_status"
                  class="form-select shadow-xl"
                >
                  <option [selected]="true" hidden>
                    Please Select Civil Status
                  </option>
                  <option value="single">Single</option>
                  <option value="married">Married</option>
                  <option value="widowed">Widowed</option>
                  <option value="divorced">Divorced</option>
                </select> -->
              </div>
            </div>
            <div class="col-3">
              <div class="mb-3">
                <label for="email" class="form-label"> Email Address </label>
                <input
                  pInputText
                  type="email"
                  class="py-2 border"
                  formControlName="email_address"
                  name="email"
                  id="email"
                  required
                />
              </div>
            </div>
            <div class="col-3">
              <div class="mb-3">
                <label for="contact_number" class="form-label">
                  Contact Number
                </label>
                <p-inputMask
                  mask="99999999999"
                  formControlName="contact_number"
                  placeholder="0912xxxxxxx"
                ></p-inputMask>

                <!-- <input
                  (input)="inputMask($event)"
                  type="text"
                  pattern="[0-9]{11}"
                  class="form-control py-2 border"
                  formControlName="contact_number"
                  maxlength="11"
                  name="contact_number"
                  id="contact_number"
                /> -->
              </div>
            </div>
          </div>
          <div class="row px-3">
            <div class="col-4">
              <div class="mb-3">
                <label for="birth_date" class="form-label"> Birth Date </label>
                <p-calendar
                  [showIcon]="true"
                  type="date"
                  class="py-2 border"
                  formControlName="birthdate"
                  name="birth_date"
                  id="birth_date"
                >
                </p-calendar>
              </div>
            </div>
            <div class="col-8">
              <div class="mb-3">
                <label for="birth_place" class="form-label">
                  Birth Place
                </label>
                <input
                  pInputText
                  type="text"
                  class="py-2 border"
                  formControlName="birth_place"
                  name="birth_place"
                  id="birth_place"
                  required
                  [style]="{ minWidth: '100%' }"
                />
              </div>
            </div>
          </div>
          <div class="row px-3">
            <div class="col-4">
              <div class="mb-3">
                <label for="citizenship" class="form-label">
                  Citizenship
                </label>
                <p-dropdown
                  formControlName="citizenship"
                  [options]="nationalitiesList"
                  placeholder="Select Citizenship"
                  [editable]="true"
                  [showClear]="true"
                ></p-dropdown>
                <!-- <select
                  id="citizenship"
                  class="form-select shadow-xl"
                  formControlName="citizenship"
                >
                  <option value disabled selected>
                    Please Select Citizenship
                  </option>
                  <ng-container *ngFor="let nationality of nationalitiesList">
                    <option [ngValue]="nationality">{{ nationality }}</option>
                  </ng-container>
                </select> -->
              </div>
            </div>
            <div class="col-4">
              <div class="mb-3">
                <label for="religion" class="form-label"> Religion </label>
                <p-dropdown
                  formControlName="religion"
                  [options]="religionList"
                  placeholder="Select Religion"
                  [showClear]="true"
                  [editable]="true"
                  [filter]="true"
                  filterBy="name"
                  [style]="{ minWidth: '100%' }"
                ></p-dropdown>
                <!-- <input
                  type="text"
                  class="form-control py-2 border"
                  formControlName="religion"
                  name="religion"
                  id="religion"
                  list="religionL"
                  required
                />
                <datalist id="religionL">
                  <ng-container *ngFor="let religion of religionList">
                    <option [ngValue]="religion">{{ religion }}</option>
                  </ng-container>
                </datalist> -->
              </div>
            </div>
          </div>
          <hr />
          <div class="row px-3">
            <div class="col-6">
              <div class="mb-3">
                <label for="enrollIn" class="form-label">
                  Interested to Enroll In:
                </label>
                <p-dropdown
                  formControlName="enrollIn"
                  [options]="enrollist"
                  optionLabel="name"
                  optionValue="value"
                  placeholder="Please select"
                  [editable]="true"
                  [showClear]="true"
                  [filter]="true"
                  filterBy="name"
                  [style]="{ minWidth: '100%' }"
                ></p-dropdown>
                <!-- <select
                  name="enrollIn"
                  id="enrollIn"
                  formControlName="enrollIn"
                  class="form-select shadow-xl"
                >
                  <option value disabled selected>Please select</option>
                  <option value="tesda">TESDA</option>
                  <option value="shs">SHS</option>
                  <option value="college">College</option>
                  <option value="graduate">Graduate Studies</option>
                  <option value="graduateStudies">Graduate Studies</option>
					<option value="tesda">TESDA</option>
					<option value="shs">Senior HighSchool</option>
                </select> -->
              </div>
            </div>
            <div class="col-6">
              <div class="mb-3 input-holder">
                <label for="program" class="form-label"> Program </label>
                <p-dropdown
                  formControlName="program"
                  [options]="courses"
                  optionLabel="name"
                  optionValue="courses_id"
                  placeholder="Please select courses"
                  [editable]="true"
                  [showClear]="true"
                  [filter]="true"
                  filterBy="name"
                  [style]="{ minWidth: '100%' }"
                >
                  ></p-dropdown
                >
                <!-- <select
                  name="program"
                  id="program"
                  class="form-select shadow-xl"
                  formControlName="program"
                >
                  <option value disabled selected>Please select Course</option>
                  <option
                    *ngFor="let option of courses"
                    [value]="option.courses_id"
                  >
                    {{ option.name }}
                  </option>
                </select> -->
              </div>
            </div>
          </div>
          <div class="row px-3">
            <div class="col-4">
              <div class="mb-3 input-holder">
                <label for="semester" class="form-label">
                  Semester
                  <span class="text-danger">*</span>
                </label>
                <input
                  pInputText
                  [value]="semester"
                  type="text"
                  name="semester"
                  class="py-2 border"
                  id="semester"
                  formControlName="semester"
                  readonly
                  [style]="{ minWidth: '100%' }"
                />
              </div>
            </div>
            <div class="col-4">
              <div class="mb-3 input-holder">
                <label for="student_yr_level" class="form-label">
                  Year Level
                  <span class="text-danger">*</span>
                </label>
                <p-dropdown
                  formControlName="student_yr_level"
                  [options]="yearlvl"
                  optionLabel="name"
                  optionValue="value"
                  placeholder="Please select"
                  [editable]="true"
                  [showClear]="true"
                ></p-dropdown>
                <!-- <select
                  name="student_yr_level"
                  id="student_yr_level"
                  class="form-select shadow-xl"
                  formControlName="student_yr_level"
                  required
                >
                  <option value disabled selected>
                    Please select year level
                  </option>
                  <option value="1">1st Year</option>
                  <option value="2">2nd Year</option>
                  <option value="3">3rd Year</option>
                  <option value="4">4th Year</option>
                </select> -->
              </div>
            </div>
            <div class="col-4">
              <div class="mb-3 input-holder">
                <label for="student_status" class="form-label">
                  Student Status
                  <span class="text-danger">*</span>
                </label>
                <p-dropdown
                  formControlName="student_status"
                  [options]="studstatus"
                  optionLabel="name"
                  optionValue="value"
                  placeholder="Please select"
                  [editable]="true"
                  [showClear]="true"
                ></p-dropdown>
                <!-- <select
                  name="student_status"
                  id="student_status"
                  class="form-select shadow-xl"
                  formControlName="student_status"
                >
                  <option disabled value>Please Select Status</option>
                  <option value="regular">Regular Student</option>
                  <option value="irregular">Irregular Student</option>
                </select> -->
              </div>
            </div>
          </div>
          <div class="py-3 text-center">
            <button
              [disabled]="signUpForm.invalid"
              [disabled]="!signUpForm.valid"
              class="btn btn-primary p-2 w-25 login-button"
            >
              Create Account
            </button>
          </div>
        </form>
        <p-progressBar
          *ngIf="loadbar"
          mode="indeterminate"
          [style]="{ height: '6px' }"
        ></p-progressBar>
      </div>

      <div *ngIf="otp" class="py-3">
        <div class="text-center mx-auto my-3">
          <h2 class="fw-bold">Enter OTP Code</h2>
          <p class="fst-italic mx-auto py-3 w-75">
            An Otp Verification Code has been sent to your email. Please input
            the correct code to verify your account.. Thank you
          </p>
        </div>
        <div
          class="d-flex justify-content-center align-items-center flex-column"
        >
          <div class="otp-inputs d-flex gap-3">
            <p-toast></p-toast>
            <p-inputOtp
              pAutoFocus
              [autofocus]="true"
              [length]="6"
              (input)="inputMask($event)"
              class="mx-auto my-3"
              [(ngModel)]="enteredOTP"
            ></p-inputOtp>
          </div>
          <br />
          <button pButton pRipple (click)="verifyOTP()" class="btn btn-success">
            Verify OTP
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
